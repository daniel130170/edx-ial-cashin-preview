<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>International Advanced Level Cash-in Preview</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9ff;
            color: #1f2937;
        }
        .card {
            background-color: #ffffff;
            border-radius: 1.5rem; /* 24px */
            padding: 2rem; /* 32px */
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.05), 0 4px 6px -4px rgb(0 0 0 / 0.05);
            transition: all 0.3s ease;
        }
        .input-field {
            background-color: #f3f4f6;
            border: 2px solid transparent;
            border-radius: 0.75rem; /* 12px */
            padding: 0.75rem 1rem;
            transition: background-color 0.2s, border-color 0.2s;
        }
        .input-field:focus {
            background-color: #ffffff;
            border-color: #4f46e5;
            outline: none;
        }
        .btn-primary {
            background-color: #4f46e5;
            color: white;
            font-weight: 600;
            padding: 1rem 2rem;
            border-radius: 9999px;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.2), 0 2px 4px -2px rgba(79, 70, 229, 0.1);
        }
        .btn-primary:hover {
            background-color: #4338ca;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Apple Liquid Glass Effect for Modal --- */
        #glass-modal-card {
            background: rgba(30, 30, 35, 0.7); /* Dark, semi-transparent background */
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            backdrop-filter: blur(24px) saturate(180%);
            border-radius: 1.5rem; /* 24px */
            border: 1px solid rgba(255, 255, 255, 0.125);
            padding: 2.5rem; /* 40px */
            color: #f7f9ff; /* Light text color for contrast */
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        #glass-modal-card h2 {
            color: #ffffff;
            font-weight: 700;
        }

        #glass-modal-card .disclaimer-item span {
            color: #e5e7eb; /* Slightly dimmer text for paragraphs */
        }

        #accept-disclaimer-btn {
            background-color: rgba(255, 255, 255, 0.15);
            color: white;
            font-weight: 600;
            padding: 0.875rem 2rem; /* 14px 32px */
            border-radius: 9999px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }

        #accept-disclaimer-btn:hover {
            background-color: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Main Content -->
    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900">International Advanced Level Cash-in Preview</h1>
            <p class="mt-3 text-lg text-gray-600">Calculate your optimal IAL Maths & Further Maths grades.</p>
        </header>

        <div class="card mb-10">
            <h2 class="text-2xl font-semibold mb-2 text-gray-800">Enter Unit Scores (UMS)</h2>
            <p class="text-gray-600 mb-8">Enter the UMS score for each unit you have completed. Leave the field blank for any units you haven't taken.</p>
            <div id="units-container" class="grid md:grid-cols-2 gap-x-12 gap-y-8">
                <!-- Unit inputs will be generated by JavaScript -->
            </div>
        </div>

        <div class="text-center mb-10">
            <button id="calculate-btn" class="btn-primary text-lg">
                Calculate Best Grade Combination
            </button>
        </div>
        
        <div id="message-box" class="hidden p-4 mb-6 text-sm font-medium rounded-2xl" role="alert">
        </div>

        <div id="results-container" class="hidden fade-in">
            <h2 id="results-title" class="text-3xl font-bold mb-8 text-center text-gray-800">Your Optimal Result</h2>
            <div id="results-content" class="grid md:grid-cols-2 gap-8">
                <!-- Result cards will be injected here -->
            </div>
            <div id="explanation" class="mt-8 p-6 bg-indigo-50 text-indigo-800 rounded-2xl">
                <h3 class="font-semibold">How This Was Calculated</h3>
                <p id="explanation-text" class="mt-1"></p>
            </div>
             <div id="leftover-units" class="mt-8"></div>
        </div>
    </div>

    <!-- Disclaimer Modal -->
    <div id="disclaimer-modal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50">
        <div id="glass-modal-card" class="max-w-lg w-full fade-in">
            <h2 class="text-2xl text-center font-bold mb-6">Disclaimer</h2>
            <ul class="space-y-4 mb-8">
                <li class="disclaimer-item flex items-start space-x-3">
                    <svg class="w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg>
                    <span><strong>Unofficial Tool:</strong> This is an independent grade calculator and is NOT affiliated with Edexcel or Pearson in any way.</span>
                </li>
                <li class="disclaimer-item flex items-start space-x-3">
                    <svg class="w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.636-1.214 2.852-1.214 3.488 0l5.584 10.68c.636 1.214-.474 2.721-1.744 2.721H4.417c-1.27 0-2.38-1.507-1.744-2.721L8.257 3.099zM9 13a1 1 0 112 0 1 1 0 01-2 0zm1-4a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                    <span><strong>For Reference Only:</strong> The results are simulations based on available data. They are for personal reference only and we cannot guarantee their absolute accuracy.</span>
                </li>
                 <li class="disclaimer-item flex items-start space-x-3">
                    <svg class="w-5 h-5 text-green-400 flex-shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2V7a5 5 0 00-5-5zm0 2.5a2.5 2.5 0 012.5 2.5V7h-5V7a2.5 2.5 0 012.5-2.5z" /></svg>
                    <span><strong>Official Grades:</strong> Always rely on your official Statement of Results from Edexcel for university applications or any official purpose.</span>
                </li>
                <li class="disclaimer-item flex items-start space-x-3">
                     <svg class="w-5 h-5 text-red-400 flex-shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a9 9 0 100 18 9 9 0 000-18zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd" /></svg>
                    <span><strong>Liability:</strong> We are not liable for any decisions made based on the results from this tool.</span>
                </li>
                 <li class="disclaimer-item flex items-start space-x-3">
                    <svg class="w-5 h-5 text-purple-400 flex-shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z" /><path fill-rule="evenodd" d="M.664 10.59a1.651 1.651 0 010-1.18l.879-1.528A1.65 1.65 0 013.437 7h13.126c.636 0 1.242.312 1.594.862l.88 1.528a1.65 1.65 0 010 1.18l-.879 1.528A1.65 1.65 0 0116.563 13H3.437a1.65 1.65 0 01-1.594-.862l-.88-1.528zM11 10a1 1 0 11-2 0 1 1 0 012 0z" clip-rule="evenodd" /></svg>
                    <span><strong>Privacy:</strong> We do not store, save, or share any of the grade data you enter. All calculations are done in real-time on your device.</span>
                </li>
            </ul>
            <p class="text-center text-gray-400 text-sm mb-6">By clicking "Accept and Continue", you acknowledge and agree to these terms.</p>
            <div class="text-center">
                <button id="accept-disclaimer-btn">Accept and Continue</button>
            </div>
        </div>
    </div>


    <script>
        // --- DATA AND CONFIGURATION ---
        const unitsData = [
            { id: 'P1', name: 'P1', category: 'Pure Mathematics', max: 100, type: 'Core' }, { id: 'P2', name: 'P2', category: 'Pure Mathematics', max: 100, type: 'Core' },
            { id: 'P3', name: 'P3', category: 'Pure Mathematics', max: 100, type: 'A2' }, { id: 'P4', name: 'P4', category: 'Pure Mathematics', max: 100, type: 'A2' },
            { id: 'FP1', name: 'FP1', category: 'Pure Mathematics', max: 100, type: 'AS' }, { id: 'FP2', name: 'FP2', category: 'Pure Mathematics', max: 100, type: 'A2' },
            { id: 'FP3', name: 'FP3', category: 'Pure Mathematics', max: 100, type: 'A2' }, { id: 'M1', name: 'M1', category: 'Mechanics', max: 100, type: 'AS' },
            { id: 'M2', name: 'M2', category: 'Mechanics', max: 100, type: 'A2' }, { id: 'M3', name: 'M3', category: 'Mechanics', max: 100, type: 'A2' },
            { id: 'S1', name: 'S1', category: 'Statistics', max: 100, type: 'AS' }, { id: 'S2', name: 'S2', category: 'Statistics', max: 100, type: 'A2' },
            { id: 'S3', name: 'S3', category: 'Statistics', max: 100, type: 'A2' }, { id: 'D1', name: 'D1', category: 'Decision Mathematics', max: 100, type: 'AS' },
        ];
        const gradeBoundaries = {
            ial: { A_star: 480, A: 480, B: 420, C: 360, D: 300, E: 240 },
            ias: { A: 240, B: 210, C: 180, D: 150, E: 120 }
        };
        const unitSortOrder = unitsData.reduce((acc, unit, index) => {
            acc[unit.id] = index;
            return acc;
        }, {});

        // --- UI INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // --- MODAL LOGIC ---
            const disclaimerModal = document.getElementById('disclaimer-modal');
            const acceptDisclaimerBtn = document.getElementById('accept-disclaimer-btn');

            // Check if the user has already accepted the disclaimer
            if (!localStorage.getItem('disclaimerAccepted')) {
                disclaimerModal.classList.remove('hidden');
            }

            // Event listener for the accept button
            acceptDisclaimerBtn.addEventListener('click', () => {
                localStorage.setItem('disclaimerAccepted', 'true');
                disclaimerModal.classList.add('hidden');
            });

            // --- UNIT INPUTS SETUP ---
            const container = document.getElementById('units-container');
            const categories = { 'Pure Mathematics': [], 'Mechanics': [], 'Statistics': [], 'Decision Mathematics': [] };
            unitsData.forEach(unit => categories[unit.category].push(unit));
            for (const category in categories) {
                if (categories[category].length === 0) continue;
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'space-y-4';
                categoryDiv.innerHTML = `<h3 class="text-xl font-semibold text-gray-700 border-b-2 border-gray-200 pb-3">${category}</h3>`;
                categories[category].forEach(unit => {
                    categoryDiv.innerHTML += `<div class="flex items-center justify-between"><label for="${unit.id}" class="font-medium text-gray-700">${unit.name}</label><input type="number" id="${unit.id}" name="${unit.id}" min="0" max="${unit.max}" placeholder="UMS" class="w-28 text-center input-field"></div>`;
                });
                container.appendChild(categoryDiv);
            }
            document.getElementById('calculate-btn').addEventListener('click', calculateAndDisplay);
        });

        // --- UTILITY FUNCTIONS ---
        function getCombinations(array, size) {
            const result = [];
            function p(t, i) {
                if (t.length === size) { result.push(t); return; }
                if (i >= array.length) { return; }
                p(t.concat(array[i]), i + 1);
                p(t, i + 1);
            }
            p([], 0);
            return result;
        }

        function getGrade(subject, score, units, qualificationType) {
            const boundaries = gradeBoundaries[qualificationType];
            let grade = 'U';
            if (score >= boundaries.E) grade = 'E'; if (score >= boundaries.D) grade = 'D';
            if (score >= boundaries.C) grade = 'C'; if (score >= boundaries.B) grade = 'B';
            if (score >= boundaries.A) {
                grade = 'A';
                if (qualificationType === 'ial') {
                    if (subject === 'maths') {
                        // A* in Maths requires an A overall (480/600) AND 180/200 in P3+P4
                        const p3Score = units.find(u => u.id === 'P3')?.score || enteredScores['P3']?.score || 0;
                        const p4Score = units.find(u => u.id === 'P4')?.score || enteredScores['P4']?.score || 0;
                        if ((p3Score + p4Score) >= 180) grade = 'A*';
                    }
                    if (subject === 'fmaths') {
                        // A* in Further Maths requires an A overall (480/600) AND 270/300 in the best 3 A2 units
                        const a2units = units.filter(u => u.type === 'A2').sort((a, b) => b.score - a.score);
                        if (a2units.length >= 3 && a2units.slice(0, 3).reduce((sum, u) => sum + u.score, 0) >= 270) {
                            grade = 'A*';
                        }
                    }
                }
            }
            return grade;
        }
        
        function showMessage(message, isError = true) {
            const box = document.getElementById('message-box');
            box.textContent = message;
            box.className = `p-4 mb-6 text-sm font-medium rounded-2xl ${isError ? 'text-red-800 bg-red-100' : 'text-blue-800 bg-blue-100'}`;
            box.style.display = 'block';
        }

        // --- CORE CALCULATION LOGIC ---
        let enteredScores = {}; // Make it globally accessible within the script
        function calculateAndDisplay() {
            enteredScores = {}; // Reset on each calculation
            unitsData.forEach(unit => {
                const score = parseInt(document.getElementById(unit.id).value, 10);
                if (!isNaN(score) && score >= 0 && score <= unit.max) enteredScores[unit.id] = { ...unit, score };
            });
            
            document.getElementById('message-box').style.display = 'none';
            document.getElementById('results-container').style.display = 'none';

            calculateCombined(enteredScores);
        }

        function calculateCombined(enteredScores) {
            const availableUnits = Object.values(enteredScores);
            const p1 = enteredScores['P1'], p2 = enteredScores['P2'], p3 = enteredScores['P3'], p4 = enteredScores['P4'];
            if (!p1 || !p2 || !p3 || !p4 || !enteredScores['FP1'] || (!enteredScores['FP2'] && !enteredScores['FP3']) || availableUnits.length < 10) {
                showMessage('Error: For a combined calculation, P1-P4, FP1, at least one of FP2/FP3, and a total of 10 units are required.');
                return;
            }

            // Note: P1/P2 and P3/P4 are not combined into C12/C34 here to preserve original unit data for A* checks.
            const otherUnits = availableUnits.filter(u => !['P1', 'P2', 'P3', 'P4'].includes(u.id));
            const allPossibleResults = [];
            
            const validPairings = [ ['S1', 'S2'], ['M1', 'M2'], ['S1', 'M1'], ['S1', 'D1'], ['M1', 'D1'] ];
            const mathsAppliedCombinations = [];
            validPairings.forEach(pair => {
                const u1 = otherUnits.find(u => u.id === pair[0]);
                const u2 = otherUnits.find(u => u.id === pair[1]);
                if (u1 && u2) {
                    mathsAppliedCombinations.push([u1, u2]);
                }
            });

            if(mathsAppliedCombinations.length === 0) {
                 showMessage('Error: No valid applied unit pairing found for IAL Mathematics (e.g., S1/S2, M1/M2, etc.).');
                 return;
            }

            mathsAppliedCombinations.forEach(appliedCombo => {
                const mathsUnits = [p1, p2, p3, p4, ...appliedCombo];
                const fmathsPool = otherUnits.filter(u => !appliedCombo.some(ac => ac.id === u.id));
                
                if (fmathsPool.length < 6) return;
                const fmathsCore = fmathsPool.filter(u => ['FP1', 'FP2', 'FP3'].includes(u.id));
                if (!fmathsCore.some(u => u.id === 'FP1') || !fmathsCore.some(u => ['FP2', 'FP3'].includes(u.id))) return;
                const fmathsApplied = fmathsPool.filter(u => !fmathsCore.some(fc => fc.id === u.id));
                const needed = 6 - fmathsCore.length;
                if (fmathsApplied.length < needed) return;
                
                const bestFMathsCombo = getCombinations(fmathsApplied, needed).map(combo => ({ combo, score: combo.reduce((s, u) => s + u.score, 0) })).sort((a,b) => b.score - a.score)[0];
                if (!bestFMathsCombo) return;

                const finalFmathsUnits = [...fmathsCore, ...bestFMathsCombo.combo];
                const mathsResult = { units: mathsUnits, score: mathsUnits.reduce((s, u) => s + u.score, 0) };
                const fmathsResult = { units: finalFmathsUnits, score: finalFmathsUnits.reduce((s, u) => s + u.score, 0) };
                
                allPossibleResults.push({
                    maths: { ...mathsResult, grade: getGrade('maths', mathsResult.score, mathsResult.units, 'ial'), subject: 'maths' },
                    fmaths: { ...fmathsResult, grade: getGrade('fmaths', fmathsResult.score, fmathsResult.units, 'ial'), subject: 'fmaths' }
                });
            });
            
            if (allPossibleResults.length === 0) {
                showMessage('Error: No valid combined cash-in combination found with the provided units.'); return;
            }

            const gradeOrder = ['A*', 'A', 'B', 'C', 'D', 'E', 'U'].reduce((obj, grade, i) => ({...obj, [grade]: i }), {});
            allPossibleResults.sort((a, b) => {
                const gradeDiff = gradeOrder[a.maths.grade] - gradeOrder[b.maths.grade]; if (gradeDiff !== 0) return gradeDiff;
                const fgradeDiff = gradeOrder[a.fmaths.grade] - gradeOrder[b.fmaths.grade]; if (fgradeDiff !== 0) return fgradeDiff;
                const umsDiff = b.maths.score - a.maths.score; if (umsDiff !== 0) return umsDiff;
                return b.fmaths.score - a.fmaths.score;
            });

            displayResults(allPossibleResults[0], availableUnits);
        }

        // --- UI DISPLAY FUNCTIONS ---
        function displayResults(result, allEnteredUnits) {
            const resultsContent = document.getElementById('results-content');
            resultsContent.innerHTML = ''; // Clear previous results
            document.getElementById('results-title').textContent = 'Your Optimal Combined Result';
            
            resultsContent.innerHTML += createResultCardHTML('IAL Mathematics', result.maths);
            resultsContent.innerHTML += createResultCardHTML('IAL Further Mathematics', result.fmaths);

            const explanation = document.getElementById('explanation');
            explanation.style.display = 'block';
            document.getElementById('explanation-text').textContent = `This (${result.maths.grade}, ${result.fmaths.grade}) combination was chosen according to the official "maximisation principle". This rule prioritises the highest possible subject grades first, and then the highest UMS total.`;
            
            const usedIds = new Set();
            result.maths.units.forEach(u => usedIds.add(u.id));
            result.fmaths.units.forEach(u => usedIds.add(u.id));
            const leftoverUnits = allEnteredUnits.filter(u => !usedIds.has(u.id));
            
            const leftoverDiv = document.getElementById('leftover-units');
            if (leftoverUnits.length > 0) {
                leftoverDiv.innerHTML = `<h3 class="text-xl font-semibold text-gray-700 mt-8 border-b pb-3 mb-4">Unused Units</h3><div class="flex flex-wrap gap-3">${leftoverUnits.map(u => `<div class="bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm font-medium">${u.name} (${u.score} UMS)</div>`).join('')}</div>`;
            } else {
                leftoverDiv.innerHTML = '';
            }

            document.getElementById('results-container').style.display = 'block';
            document.getElementById('results-container').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function createResultCardHTML(title, data) {
            const unitsToDisplay = data.units;

            let aStarInfo = {
                ids: new Set(),
                text: ''
            };

            if (data.grade === 'A*') {
                if (data.subject === 'maths') {
                    aStarInfo.ids.add('P3');
                    aStarInfo.ids.add('P4');
                    const p3Score = enteredScores['P3']?.score || 0;
                    const p4Score = enteredScores['P4']?.score || 0;
                    aStarInfo.text = `(P3+P4 = ${p3Score + p4Score} ≥ 180)`;
                } else if (data.subject === 'fmaths') {
                    const a2Units = unitsToDisplay.filter(u => u.type === 'A2').sort((a, b) => b.score - a.score);
                    let top3A2Score = 0;
                    for (let i = 0; i < 3 && i < a2Units.length; i++) {
                        aStarInfo.ids.add(a2Units[i].id);
                        top3A2Score += a2Units[i].score;
                    }
                    aStarInfo.text = `(Top 3 A2 = ${top3A2Score} ≥ 270)`;
                }
            }

            const unitsHtml = unitsToDisplay.sort((a,b) => unitSortOrder[a.id] - unitSortOrder[b.id]).map(u => {
                const isA2 = u.type === 'A2';
                const isHighlighted = aStarInfo.ids.has(u.id);
                const bgColor = isHighlighted ? 'bg-indigo-100' : 'bg-gray-100';
                const textColor = isHighlighted ? 'text-indigo-800' : 'text-gray-800';
                
                return `
                <li class="flex justify-between items-center text-sm p-3 rounded-lg ${bgColor}">
                    <span class="font-medium ${textColor}">${u.name} ${isA2 ? `<span class="font-semibold ${isHighlighted ? 'text-indigo-600' : 'text-gray-500'}">(A2)</span>` : ''}</span>
                    <span class="font-bold ${textColor}">${u.score} UMS</span>
                </li>`;
            }).join('');
            
            const totalUMS = 600;

            return `
                <div class="card h-full flex flex-col">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">${title}</h3>
                    <div class="flex justify-between items-baseline mb-4">
                        <span class="text-lg font-medium text-gray-600">Overall Grade:</span>
                        <div class="text-right">
                            <span class="text-4xl font-bold text-indigo-600">${data.grade}</span>
                            ${aStarInfo.text ? `<span class="block text-sm font-semibold text-indigo-500 mt-1">${aStarInfo.text}</span>` : ''}
                        </div>
                    </div>
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-lg font-medium text-gray-600">Total UMS:</span>
                        <span class="text-2xl font-semibold text-gray-700">${data.score} / ${totalUMS}</span>
                    </div>
                    <div class="mt-auto">
                        <h4 class="font-semibold text-gray-700 mb-3">Units Used:</h4>
                        <ul class="space-y-2 text-gray-600">${unitsHtml}</ul>
                    </div>
                </div>`;
        }
    </script>
</body>
</html>
